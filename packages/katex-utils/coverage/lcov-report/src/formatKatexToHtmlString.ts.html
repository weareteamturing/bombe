
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/formatKatexToHtmlString.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../index.html">All files</a> / <a href="index.html">src</a> formatKatexToHtmlString.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">94.53% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>121/128</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">85.93% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>55/64</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>32/32</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">95.86% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>116/121</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input oninput="onInput()" type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a>
<a name='L240'></a><a href='#L240'>240</a>
<a name='L241'></a><a href='#L241'>241</a>
<a name='L242'></a><a href='#L242'>242</a>
<a name='L243'></a><a href='#L243'>243</a>
<a name='L244'></a><a href='#L244'>244</a>
<a name='L245'></a><a href='#L245'>245</a>
<a name='L246'></a><a href='#L246'>246</a>
<a name='L247'></a><a href='#L247'>247</a>
<a name='L248'></a><a href='#L248'>248</a>
<a name='L249'></a><a href='#L249'>249</a>
<a name='L250'></a><a href='#L250'>250</a>
<a name='L251'></a><a href='#L251'>251</a>
<a name='L252'></a><a href='#L252'>252</a>
<a name='L253'></a><a href='#L253'>253</a>
<a name='L254'></a><a href='#L254'>254</a>
<a name='L255'></a><a href='#L255'>255</a>
<a name='L256'></a><a href='#L256'>256</a>
<a name='L257'></a><a href='#L257'>257</a>
<a name='L258'></a><a href='#L258'>258</a>
<a name='L259'></a><a href='#L259'>259</a>
<a name='L260'></a><a href='#L260'>260</a>
<a name='L261'></a><a href='#L261'>261</a>
<a name='L262'></a><a href='#L262'>262</a>
<a name='L263'></a><a href='#L263'>263</a>
<a name='L264'></a><a href='#L264'>264</a>
<a name='L265'></a><a href='#L265'>265</a>
<a name='L266'></a><a href='#L266'>266</a>
<a name='L267'></a><a href='#L267'>267</a>
<a name='L268'></a><a href='#L268'>268</a>
<a name='L269'></a><a href='#L269'>269</a>
<a name='L270'></a><a href='#L270'>270</a>
<a name='L271'></a><a href='#L271'>271</a>
<a name='L272'></a><a href='#L272'>272</a>
<a name='L273'></a><a href='#L273'>273</a>
<a name='L274'></a><a href='#L274'>274</a>
<a name='L275'></a><a href='#L275'>275</a>
<a name='L276'></a><a href='#L276'>276</a>
<a name='L277'></a><a href='#L277'>277</a>
<a name='L278'></a><a href='#L278'>278</a>
<a name='L279'></a><a href='#L279'>279</a>
<a name='L280'></a><a href='#L280'>280</a>
<a name='L281'></a><a href='#L281'>281</a>
<a name='L282'></a><a href='#L282'>282</a>
<a name='L283'></a><a href='#L283'>283</a>
<a name='L284'></a><a href='#L284'>284</a>
<a name='L285'></a><a href='#L285'>285</a>
<a name='L286'></a><a href='#L286'>286</a>
<a name='L287'></a><a href='#L287'>287</a>
<a name='L288'></a><a href='#L288'>288</a>
<a name='L289'></a><a href='#L289'>289</a>
<a name='L290'></a><a href='#L290'>290</a>
<a name='L291'></a><a href='#L291'>291</a>
<a name='L292'></a><a href='#L292'>292</a>
<a name='L293'></a><a href='#L293'>293</a>
<a name='L294'></a><a href='#L294'>294</a>
<a name='L295'></a><a href='#L295'>295</a>
<a name='L296'></a><a href='#L296'>296</a>
<a name='L297'></a><a href='#L297'>297</a>
<a name='L298'></a><a href='#L298'>298</a>
<a name='L299'></a><a href='#L299'>299</a>
<a name='L300'></a><a href='#L300'>300</a>
<a name='L301'></a><a href='#L301'>301</a>
<a name='L302'></a><a href='#L302'>302</a>
<a name='L303'></a><a href='#L303'>303</a>
<a name='L304'></a><a href='#L304'>304</a>
<a name='L305'></a><a href='#L305'>305</a>
<a name='L306'></a><a href='#L306'>306</a>
<a name='L307'></a><a href='#L307'>307</a>
<a name='L308'></a><a href='#L308'>308</a>
<a name='L309'></a><a href='#L309'>309</a>
<a name='L310'></a><a href='#L310'>310</a>
<a name='L311'></a><a href='#L311'>311</a>
<a name='L312'></a><a href='#L312'>312</a>
<a name='L313'></a><a href='#L313'>313</a>
<a name='L314'></a><a href='#L314'>314</a>
<a name='L315'></a><a href='#L315'>315</a>
<a name='L316'></a><a href='#L316'>316</a>
<a name='L317'></a><a href='#L317'>317</a>
<a name='L318'></a><a href='#L318'>318</a>
<a name='L319'></a><a href='#L319'>319</a>
<a name='L320'></a><a href='#L320'>320</a>
<a name='L321'></a><a href='#L321'>321</a>
<a name='L322'></a><a href='#L322'>322</a>
<a name='L323'></a><a href='#L323'>323</a>
<a name='L324'></a><a href='#L324'>324</a>
<a name='L325'></a><a href='#L325'>325</a>
<a name='L326'></a><a href='#L326'>326</a>
<a name='L327'></a><a href='#L327'>327</a>
<a name='L328'></a><a href='#L328'>328</a>
<a name='L329'></a><a href='#L329'>329</a>
<a name='L330'></a><a href='#L330'>330</a>
<a name='L331'></a><a href='#L331'>331</a>
<a name='L332'></a><a href='#L332'>332</a>
<a name='L333'></a><a href='#L333'>333</a>
<a name='L334'></a><a href='#L334'>334</a>
<a name='L335'></a><a href='#L335'>335</a>
<a name='L336'></a><a href='#L336'>336</a>
<a name='L337'></a><a href='#L337'>337</a>
<a name='L338'></a><a href='#L338'>338</a>
<a name='L339'></a><a href='#L339'>339</a>
<a name='L340'></a><a href='#L340'>340</a>
<a name='L341'></a><a href='#L341'>341</a>
<a name='L342'></a><a href='#L342'>342</a>
<a name='L343'></a><a href='#L343'>343</a>
<a name='L344'></a><a href='#L344'>344</a>
<a name='L345'></a><a href='#L345'>345</a>
<a name='L346'></a><a href='#L346'>346</a>
<a name='L347'></a><a href='#L347'>347</a>
<a name='L348'></a><a href='#L348'>348</a>
<a name='L349'></a><a href='#L349'>349</a>
<a name='L350'></a><a href='#L350'>350</a>
<a name='L351'></a><a href='#L351'>351</a>
<a name='L352'></a><a href='#L352'>352</a>
<a name='L353'></a><a href='#L353'>353</a>
<a name='L354'></a><a href='#L354'>354</a>
<a name='L355'></a><a href='#L355'>355</a>
<a name='L356'></a><a href='#L356'>356</a>
<a name='L357'></a><a href='#L357'>357</a>
<a name='L358'></a><a href='#L358'>358</a>
<a name='L359'></a><a href='#L359'>359</a>
<a name='L360'></a><a href='#L360'>360</a>
<a name='L361'></a><a href='#L361'>361</a>
<a name='L362'></a><a href='#L362'>362</a>
<a name='L363'></a><a href='#L363'>363</a>
<a name='L364'></a><a href='#L364'>364</a>
<a name='L365'></a><a href='#L365'>365</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">22x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">124x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">22821x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">22821x</span>
<span class="cline-any cline-yes">324x</span>
<span class="cline-any cline-yes">324x</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">162x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-yes">46x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-yes">256x</span>
<span class="cline-any cline-yes">256x</span>
<span class="cline-any cline-yes">256x</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">256x</span>
<span class="cline-any cline-yes">272x</span>
<span class="cline-any cline-yes">233x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">45x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import katex from 'katex';
import { parse, NodeType, HTMLElement } from 'node-html-parser';
&nbsp;
import { injectHtmlToContentFrame } from './injectHtmlToContentFrame';
import { choiceSelector } from './internal/choiceSelector';
import { isNullable, isValidJSON, isNotEmptyString } from './internal/is';
import { removeLineBreak } from './internal/removeLineBreak';
&nbsp;
/**
 * [보기], [박스] 에 해당하는 div frame을 의미하는 html을 반환
 */
const injectTexToBoxFrame = (text: string, title = <span class="branch-0 cbranch-no" title="branch not covered" >false)</span> =&gt; {
  return `&lt;div class="_cms_condition-box-frame ${
    title &amp;&amp; '_cms_condition-box-frame-with-title'
  }"&gt;&lt;div class="_cms_codition-box-title-row"&gt;${
    title ? '&lt;span class="_cms_title-center"&gt;&amp;lt;보기&amp;gt;&lt;/span&gt;' : ''
  }&lt;/div&gt;${text}&lt;/div&gt;`;
};
&nbsp;
/**
 * [보기]와 [보기 끝]사이에 있는 문자열들을 추출해서 &lt;보기&gt; 제목이 있는 박스를 의미하는 div 안에 넣고 반환
 */
const convertConditionMarkToHTML = (text: string) =&gt; {
  // return text.replace(/\[보기\](.*?)\[보기 끝\]/gms, injectTexToBoxFrame('$1', true));
  return text.replace(/^\[보기\]$(\r?\n)(.*?)^\[보기 끝\]$/gms, injectTexToBoxFrame('$2', true));
};
&nbsp;
/**
 * [박스]와 [박스 끝]사이에 있는 문자열들을 추출해서 박스를 의미하는 div 안에 넣고 반환
 */
const convertBoxMarkToHTML = (text: string) =&gt; {
  // return text.replace(/\[박스\](.*?)\[박스 끝\]/gms, injectTexToBoxFrame('$1', false));
  return text.replace(/^\[박스\]$(\r?\n)(.*?)^\[박스 끝\]$/gms, injectTexToBoxFrame('$2', false));
};
&nbsp;
/**
 * [정답]에 해당하는 줄을 삭제하고 반환
 */
const excludeAnswerTagLine = (text: string) =&gt; {
  return text.replace(/(\[정답\] *-?\d+[ \n\r]?)/g, '');
};
&nbsp;
/**
 * &lt;img /&gt; 뒤에 붙는 줄 바꿈을 하나 삭제한 뒤 반환
 */
const excludeNewLineFollowingImgTag = (text: string) =&gt; {
  return text.replace(/(&lt;img.*?\/&gt;)[\n\r]/g, '$1');
};
&nbsp;
/**
 * \n을 &lt;br/&gt; 태그로 바꾸고 반환
 */
const convertNewLineToHTMLTag = (text: string) =&gt; {
  return text.replace(/\n/gm, () =&gt; '&lt;br/&gt;');
};
&nbsp;
const getChoiceNumberSymbol = (choice: number) =&gt; {
  <span class="missing-if-branch" title="if path not taken" >I</span>if (choice &lt;= 0 || choice &gt; 5) {
<span class="cstat-no" title="statement not covered" >    return '';</span>
  }
  return '①②③④⑤'[choice - 1];
};
&nbsp;
const convertChoiceMarkToHTML = (text: string) =&gt; {
  const choices = choiceSelector(text);
  const choiceHtml = `&lt;div class="_cms_choice-box"&gt;${choices
    .map(
      (c, choiceIndex) =&gt;
        `&lt;div class="_cms_choice"&gt;&lt;span class="_cms_number-symbol"&gt;${getChoiceNumberSymbol(
          choiceIndex + 1,
        )}&lt;/span&gt;${c}&lt;/div&gt;`,
    )
    .join('')}&lt;/div&gt;`;
  // must be function not just 'choiceHtml' itself
  return text.replace(/^\[선지\s*\d*\](\r?\n)?(.*)/gms, () =&gt; choiceHtml);
};
&nbsp;
// ex)
// [테이블]
// |{"rowSpan": 2} 성적(점) |{"colSpan": 2} 상대도수 |
// |  A반 |  B반  |
// |70 ~ 80|0.4|0.24|
// |80 ~ 90|0.44|0.32|
// |90 ~ 100|0.16|0.44|
// |합계|1|1|
// [테이블 끝]
type TableMetadata = Partial&lt;{
  colSpan: number;
  rowSpan: number;
  bg: boolean;
}&gt;;
/**
 * root-1. extract all [테이블]...[테이블 끝] texts and substitue for each table text
 *  table-1. split line as a row
 *    row-1. trim side cell separators
 *    row-2. split cells by spearators
 *      cell-1. process to KaTex HTML for each cell
 *      cell-2. wrap, decorate with table(td) cell css
 *    row-3. join cells
 *  table-2. join rows
 *  table-3. wrap, decorate with table(table) box css
 */
const convertTableMarkToHTML = (rootText: string) =&gt; {
  const cellSeparator = '|';
  return rootText.replace(/^\[테이블\]$(\r?\n)(.*?)^\[테이블 끝\]$/gms, (_, __, innerText) =&gt;
    convertTableTextToHtml(innerText),
  );
&nbsp;
  function convertTableTextToHtml(text: string) {
    const rowTexts = text.split('\n').slice(0, -1);
    return wrapIntoTableBox(rowTexts.map(convertRowTextToHtml).map(wrapIntoTableRow).join(''));
  }
&nbsp;
  function convertRowTextToHtml(text: string) {
    <span class="missing-if-branch" title="if path not taken" >I</span>if (isInvalidRowText(text)) <span class="cstat-no" title="statement not covered" >return '';</span>
&nbsp;
    return renderToStringWithDollar(text.slice(1, text.length - 1))
      .split(cellSeparator)
      .map(decorateCellHtml)
      .join('');
&nbsp;
    function isInvalidRowText(text: string) {
      return !(text.startsWith(cellSeparator) &amp;&amp; text.endsWith(cellSeparator));
    }
&nbsp;
    function decorateCellHtml(cellHtml: string) {
      const metadataRegex = /^{(.*?)}/g;
      const cell = cellHtml.replace(metadataRegex, '').replace(/(\r\n|\n|\r)/gm, '');
&nbsp;
      return `&lt;td class="_cms_table-cell" ${metadataToInlineAttributeString(parseMetadata(cellHtml))}"&gt;${cell}&lt;/td&gt;`;
&nbsp;
      function parseMetadata(cellText: string): TableMetadata {
        const metadataText = cellText.match(metadataRegex)?.[0];
        return !isNullable(metadataText) &amp;&amp; isValidJSON(metadataText) ? JSON.parse(metadataText) : {};
      }
&nbsp;
      function metadataToInlineAttributeString({ bg, colSpan, rowSpan }: TableMetadata) {
        let result = '';
        if (bg) {
          result += 'style="background-color: #F3F4F6"';
        }
        if (colSpan) {
          result += ` colspan="${colSpan}"`;
        }
        if (rowSpan) {
          result += ` rowspan="${rowSpan}"`;
        }
        return result;
      }
    }
  }
&nbsp;
  function wrapIntoTableRow(html: string) {
    return `&lt;tr class="_cms_table-row"&gt;${html}&lt;/tr&gt;`;
  }
&nbsp;
  function wrapIntoTableBox(html: string) {
    return `&lt;table class="_cms_table-box"&gt;${html}&lt;/table&gt;`;
  }
};
&nbsp;
const renderToStringWithDollar = (text: string) =&gt; {
  let dollarMode = false;
  let startIndex = 0;
  let endIndex = 0;
  let resultHTML = '';
  let metDollar = false;
&nbsp;
  for (let index = 0; index &lt; text.length; index++) {
    const char = text[index];
&nbsp;
    if (char === '$') {
      metDollar = true;
      if (!dollarMode) {
        endIndex = index;
        resultHTML += text.slice(startIndex, endIndex);
        startIndex = index;
        dollarMode = true;
      } else <span class="missing-if-branch" title="else path not taken" >E</span>if (dollarMode) {
        endIndex = index;
        const targetString = text
          .slice(startIndex + 1, endIndex)
          .replace(/\n/g, '')
          .replace(/&lt;br ?\/?&gt;/g, '');
        try {
          const renderResult = katex.renderToString(targetString, {
            strict: 'ignore',
            throwOnError: false,
            errorColor: '#CF222E',
            trust: true,
            output: 'html',
            displayMode: false,
          });
          resultHTML += renderResult;
          startIndex = index + 1;
        } catch (error) {
          // resultAccu += targetString
        }
        dollarMode = false;
      }
    }
  }
  if (!metDollar) {
    return text;
  }
&nbsp;
  resultHTML += text.slice(startIndex);
&nbsp;
  return resultHTML;
};
&nbsp;
/**
 * html의 phantom box로 처리되어야 하는 Element들에 class를 추가한다.
 * Phantom Box를 활용하는 개념집을 렌더링하는 것이 아니라면 파이프라인에 포함하지 않는것이 성능에 유리하다.
 *
 * https://www.notion.so/teamturing2/Tex-Phantom-Box-8cd1e4dc61d1442080b136b811d61fab?pvs=4
 */
&nbsp;
const injectPhantomBoxClasses = (html: string) =&gt; {
  const root = parse(html, { voidTag: { closingSlash: true } });
  const boxCandidates = root
    .querySelectorAll('.boxpad')
    .filter(
      (boxpad) =&gt; !boxpad.querySelector('.boxpad') &amp;&amp; /style=".*color[:=]"?transparent"?.*"/g.test(boxpad.toString()),
    );
  if (boxCandidates.length === 0) {
    return html;
  }
  let isFailed = false;
  boxCandidates.forEach((box, index) =&gt; {
    // Set box attributes
    box.classList.add(`phantom-box-${index}`);
    box.classList.add('_cms_phantom_box');
&nbsp;
    let dfsRoot = box;
    while (dfsRoot !== root &amp;&amp; !dfsRoot.classList.contains('vlist')) {
      dfsRoot = dfsRoot.parentNode;
    }
    <span class="missing-if-branch" title="if path not taken" >I</span>if (dfsRoot === root || !dfsRoot.classList.contains('vlist')) {
<span class="cstat-no" title="statement not covered" >      isFailed = true;</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
    }
    const stack: HTMLElement[] = [];
    const borderCandidates: HTMLElement[] = [];
    stack.push(dfsRoot);
    while (stack.length) {
      const cur = stack[stack.length - 1];
      stack.pop();
      if (cur.classList.contains('stretchy') &amp;&amp; cur.classList.contains('fbox')) {
        borderCandidates.push(cur);
      }
      cur.childNodes.forEach((child) =&gt; {
        if (child.nodeType === NodeType.ELEMENT_NODE &amp;&amp; child instanceof HTMLElement) {
          stack.push(child);
        }
      });
    }
    <span class="missing-if-branch" title="if path not taken" >I</span>if (borderCandidates.length !== 1) {
<span class="cstat-no" title="statement not covered" >      isFailed = true;</span>
    } else {
      borderCandidates[0].classList.add(`phantom-box-border-${index}`);
    }
  });
  <span class="missing-if-branch" title="if path not taken" >I</span>if (isFailed) {
<span class="cstat-no" title="statement not covered" >    return html;</span>
  }
  return root.toString();
};
&nbsp;
const convertMarkUpsToHTML = (tex: string) =&gt; {
  const markUpPairs: [RegExp, string][] = [
    [
      /\[OX해설\]/g,
      removeLineBreak(`
&lt;div style="margin-top: 56px"&gt;
  &lt;svg width="24" height="14" viewBox="0 0 24 14" fill="none" xmlns="http://www.w3.org/2000/svg"&gt;
    &lt;path d="M6.37109 4.09766H0.355469V2.7168H2.51562V1.1582H4.23828V2.7168H6.37109V4.09766ZM0.642578 7.61133C0.642578 7.04167 0.761068 6.53353 0.998047 6.08691C1.23503 5.6403 1.56087 5.29167 1.97559 5.04102C2.39486 4.78581 2.86654 4.6582 3.39062 4.6582C3.91471 4.6582 4.38411 4.78581 4.79883 5.04102C5.21354 5.29167 5.53711 5.6403 5.76953 6.08691C6.00651 6.53353 6.125 7.04167 6.125 7.61133C6.125 8.18099 6.00651 8.69141 5.76953 9.14258C5.53711 9.59375 5.21354 9.94694 4.79883 10.2021C4.38411 10.4528 3.91471 10.5781 3.39062 10.5781C2.86654 10.5781 2.39486 10.4528 1.97559 10.2021C1.56087 9.94694 1.23503 9.59375 0.998047 9.14258C0.761068 8.69141 0.642578 8.18099 0.642578 7.61133ZM2.17383 7.61133C2.17383 8.08073 2.2832 8.44759 2.50195 8.71191C2.72526 8.97168 3.02148 9.10156 3.39062 9.10156C3.74609 9.10156 4.0332 8.9694 4.25195 8.70508C4.47526 8.44076 4.58919 8.07617 4.59375 7.61133C4.59375 7.30599 4.54134 7.03939 4.43652 6.81152C4.33171 6.58366 4.18815 6.41048 4.00586 6.29199C3.82812 6.16895 3.62305 6.10742 3.39062 6.10742C3.02604 6.10742 2.7321 6.24186 2.50879 6.51074C2.28548 6.77962 2.17383 7.14648 2.17383 7.61133ZM6.83594 1.0625H8.46289V5.875H9.47461V0.816406H11.1289V13.2578H9.47461V7.26953H8.46289V12.7246H6.83594V1.0625ZM22.9551 7.14648H21.2188V4.05664H18.8809V2.67578H21.2188V0.816406H22.9551V7.14648ZM12.373 5.86133C13.0384 5.66536 13.5944 5.37826 14.041 5C14.4876 4.62174 14.818 4.18652 15.0322 3.69434C15.251 3.20215 15.3626 2.68034 15.3672 2.12891V1.22656H17.1309V2.12891C17.1263 2.63932 17.2266 3.12695 17.4316 3.5918C17.6367 4.05208 17.9512 4.46224 18.375 4.82227C18.8034 5.17773 19.3366 5.45117 19.9746 5.64258L19.0586 6.98242C18.4069 6.77734 17.8464 6.47656 17.377 6.08008C16.9076 5.67904 16.5339 5.20508 16.2559 4.6582C15.9733 5.27344 15.5837 5.80208 15.0869 6.24414C14.5902 6.6862 13.9863 7.01888 13.2754 7.24219L12.373 5.86133ZM14.6836 7.66602H22.9551V10.9883H16.4199V11.7539H23.3105V13.1211H14.6973V9.7168H21.2324V9.00586H14.6836V7.66602Z" fill="#8D94A0"/&gt;
  &lt;/svg&gt;
  &lt;br/&gt; 
&lt;div/&gt;`),
    ],
    [
      /\[OX개념팁\]/g,
      removeLineBreak(`
&lt;div style="margin-top: 32px"&gt;
  &lt;svg width="49" height="14" viewBox="0 0 49 14" fill="none" xmlns="http://www.w3.org/2000/svg"&gt;
    &lt;path d="M11.1016 0.652588H9.41992V5.36938H8.28516V0.980713H6.6582V12.5471H8.28516V6.76392H9.41992V13.094H11.1016V0.652588ZM0.21875 9.33423L1.23047 10.5374C4.7373 8.50024 5.77637 5.65649 5.7832 2.18384H0.847656V3.57837H4.08105C3.84863 6.0188 2.75488 7.84399 0.21875 9.33423ZM14.9434 1.18579H13.1797V7.62524H14.1777C16.0918 7.63208 17.6709 7.55688 19.4277 7.24243L19.25 5.87524C17.7803 6.10083 16.4473 6.1897 14.9434 6.21021V1.18579ZM14.6699 12.9573H22.9551V8.43188H14.6699V12.9573ZM16.3789 11.5627V9.81274H21.2324V11.5627H16.3789ZM18.1699 5.27368H21.2188V7.92603H22.9551V0.652588H21.2188V1.80103H18.1699V3.09985H21.2188V3.96118H18.1699V5.27368ZM27.877 3.63306H30.9121V11.8362H32.9492V3.63306H35.9844V1.93774H27.877V3.63306ZM39.3066 1.93774H37.2559V11.8362H39.3066V1.93774ZM40.9746 11.8362H43.0254V8.60962H44.8027C47.0859 8.60962 48.3984 7.24927 48.3984 5.27368C48.3984 3.32544 47.1064 1.93774 44.8574 1.93774H40.9746V11.8362ZM43.0254 6.95532V3.61938H44.4746C45.6914 3.62622 46.2861 4.28931 46.2793 5.27368C46.2861 6.27173 45.6914 6.95532 44.4746 6.95532H43.0254Z" fill="#8D94A0"/&gt;
  &lt;/svg&gt;
  &lt;br/&gt;
&lt;/div&gt;`),
    ],
    [
      /\[개념집대제목\](.*?)\[개념집대제목끝\]/g,
      '&lt;p style="font-size: 18px; font-family: Pretendard; font-weight:600; line-height:24px"&gt;$1&lt;/p&gt;',
    ],
    [
      /\[개념집소제목\](.*?)\[개념집소제목끝\]/g,
      removeLineBreak(`
      &lt;div style="background-color:#F3F4F6; padding: 8px 12px; border-radius:8px; font-size: 14px; font-weight:500; font-family: Pretendard"&gt;$1&lt;/div&gt;
    `),
    ],
    [/\[공백\](.*?)\[공백끝\]/g, '&lt;div style="height: $1px"&gt;&lt;/div&gt;'],
  ];
&nbsp;
  for (let i = 0; i &lt; markUpPairs.length; i++) {
    tex = tex.replace(markUpPairs[i][0], markUpPairs[i][1] as string);
  }
&nbsp;
  return tex.replace(/^\[들여쓰기(\d*)\]$(\r?\n)(.*?)^\[들여쓰기(\d*)끝\]$/gms, (match, p1, p2, p3, p4) =&gt; {
    return p1 === p4
      ? `&lt;div class="_cms_indent-box" style="margin-left: ${1.3 * p1}rem; text-indent: -1.3rem"&gt;${p3}&lt;/div&gt;`
      : <span class="branch-1 cbranch-no" title="branch not covered" >match;</span>
  });
};
&nbsp;
export type FormatKaTexOptions = {
  convertMarkUp?: boolean;
  convertTable?: boolean;
  injectPhantomBoxClasses?: boolean;
};
export function formatKatexToHtmlStringWithOptions(
  tex: string,
  { convertMarkUp, injectPhantomBoxClasses: injectPhantomBoxClassesOption, convertTable }: FormatKaTexOptions = {
    convertMarkUp: false,
    injectPhantomBoxClasses: false,
    convertTable: false,
  },
): string {
  <span class="missing-if-branch" title="if path not taken" >I</span>if (!isNotEmptyString(tex)) <span class="cstat-no" title="statement not covered" >return '';</span>
  const dummyTransform = (str: string) =&gt; str;
&nbsp;
  const markUpConvertPipe = convertMarkUp ? convertMarkUpsToHTML : dummyTransform;
  const tableConvertPipe = convertTable ? convertTableMarkToHTML : dummyTransform;
  const phantomBoxClassesInjectionPipe = injectPhantomBoxClassesOption ? injectPhantomBoxClasses : dummyTransform;
&nbsp;
  // 이 때를 기점으로 파이프라인 이전 부분은 tex를 다루고(하지만 마크업처럼 미리 html화 된 것들도 있다.)
  // 이후 부분은 html을 다루므로 성능상, 로직상 유의가 필요하다.
  // \n을 변환하는 위치는 중요하다. mark up convert에서 실행되는 [들여쓰기] 같은 경우,
  // 정규식에서 ^$ 를 써서 새로운 줄의 시작 위치냐 아니냐가 중요하기 때문에 항상 Tex-&gt;Html과정 바로 전에
  // \n을 변환하는 위치를 고정시키도록 한다.
  const renderTexToHtml = (tex: string) =&gt;
    renderToStringWithDollar(convertNewLineToHTMLTag(excludeNewLineFollowingImgTag(tex)));
&nbsp;
  return injectHtmlToContentFrame(
    phantomBoxClassesInjectionPipe(
      renderTexToHtml(
        markUpConvertPipe(
          tableConvertPipe(
            excludeAnswerTagLine(convertChoiceMarkToHTML(convertConditionMarkToHTML(convertBoxMarkToHTML(tex)))),
          ),
        ),
      ),
    ),
  );
}
&nbsp;
const allTrueOption: Required&lt;FormatKaTexOptions&gt; = {
  convertMarkUp: true,
  injectPhantomBoxClasses: true,
  convertTable: true,
};
export function formatKatexToHtmlString(tex: string) {
  return formatKatexToHtmlStringWithOptions(tex, allTrueOption);
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2024-01-31T09:12:42.672Z
            </div>
        <script src="../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../sorter.js"></script>
        <script src="../block-navigation.js"></script>
    </body>
</html>
    